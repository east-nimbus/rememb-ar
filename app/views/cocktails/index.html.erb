<div class="bg-gray-100 min-h-screen pb-12">
  <div class="max-w-6xl mx-auto px-4 pt-8">
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-4xl font-bold text-gray-800">登録カクテル一覧</h1>
      <%= link_to "カクテル登録", new_cocktail_path, class: "btn btn-info text-white" %>
    </div>

    <% if @cocktails.any? %>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <% @cocktails.each do |cocktail| %>
          <div class="card bg-white shadow-xl hover:shadow-2xl transition-shadow duration-300">
            <% if cocktail.image.attached? %>
              <figure><%= image_tag cocktail.image, class: "h-64 w-full object-cover" %></figure>
            <% else %>
              <div class="h-64 w-full bg-gray-200 flex items-center justify-center text-gray-400">画像なし</div>
            <% end %>
            <div class="card-body">
              <h2 class="card-title text-2xl"><%= cocktail.name %></h2>
              <div class="flex gap-2 mb-2">
                <span class="badge badge-outline"><%= cocktail.base_alcohol&.humanize %></span>
                <span class="badge badge-primary badge-outline">度数: <%= cocktail.alcohol_percentage&.humanize %></span>
              </div>
              <p class="text-gray-600 line-clamp-2"><%= cocktail.note %></p>
              <div class="flex items-center gap-2 mb-4">
                <div class="rating rating-sm rating-half flex-row-reverse justify-end pointer-events-none">
                  <% 10.downto(1).each do |i| %>
                    <input type="radio" class="mask mask-star-2 <%= i.even? ? 'mask-half-2' : 'mask-half-1' %>" disabled <%= 'checked' if i == cocktail.rating %> />
                  <% end %>
                </div>
                <span class="text-lg font-bold text-yellow-500">(<%= (cocktail.rating.to_f / 2).to_s %>)</span>
              </div>
              <div class="card-actions justify-end mt-4">
                <button class="btn btn-ghost btn-sm">詳細</button>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-20">
        <p class="text-2xl text-gray-500 mb-8">まだカクテルが登録されていません。</p>
        <%= link_to "最初のカクテルを登録する", new_cocktail_path, class: "btn btn-info btn-lg text-white" %>
      </div>
    <% end %>
  </div>
</div>

<style>
  /* 全ての星に共通の基盤スタイル */
  .rating input {
    background-color: #9ca3af; /* デフォルトはグレー */
    opacity: 1 !important; /* 透明度を無効化して明るさを統一 */
  }

  /* 選択された星とその左側（DOM上では後続）を黄色にする */
  .rating input:checked,
  .rating input:checked ~ input {
    background-color: #facc15 !important; /* yellow-400 */
    opacity: 1 !important;
  }
</style>
