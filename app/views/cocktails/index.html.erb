<div data-controller="index-tabs">
  <div class="max-w-screen-2xl mx-auto px-8 pt-8">
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-4xl font-bold text-gray-800">登録カクテル一覧</h1>
      <%= link_to "カクテル登録", new_cocktail_path, class: "btn btn-info text-white" %>
    </div>

    <!-- カクテル数表示とタブボタン -->
    <div class="flex flex-wrap items-center gap-4 mb-8">
      <div class="bg-cyan-50 border border-cyan-200 text-cyan-800 px-4 py-2 rounded-md font-medium">
        登録カクテル数: <%= @cocktails_count %>
      </div>

      <button data-index-tabs-target="baseTab" data-action="click->index-tabs#showBase" class="flex items-center gap-2 px-6 py-2 rounded-full font-bold transition-all shadow-sm">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
        </svg>
        ベース順
      </button>

      <button data-index-tabs-target="alcoholTab" data-action="click->index-tabs#showAlcohol" class="flex items-center gap-2 px-8 py-2 rounded-full font-bold transition-all shadow-sm">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
        </svg>
        アルコール度数順
      </button>
    </div>

    <!-- ベース別コンテンツ -->
    <div data-index-tabs-target="baseContent" class="space-y-12">
      <% if @cocktails_by_base.any? %>
        <% @cocktails_by_base.each do |base, cocktails| %>
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-l-8 border-gray-400 pl-4">
              <%= I18n.t("enums.cocktail.base_alcohol.#{base}") %>ベース
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6">
              <% cocktails.each do |cocktail| %>
                <%= render 'cocktail_card', cocktail: cocktail %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="max-w-4xl mx-auto">
          <%= render 'no_cocktails' %>
        </div>
      <% end %>
    </div>

    <!-- 度数別コンテンツ -->
    <div data-index-tabs-target="alcoholContent" class="space-y-12 hidden">
      <% if @cocktails_by_abc.any? %>
        <% @cocktails_by_abc.each do |degree, cocktails| %>
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-l-8 border-gray-400 pl-4">
              <%= degree %>度〜
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6">
              <% cocktails.each do |cocktail| %>
                <%= render 'cocktail_card', cocktail: cocktail %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="max-w-4xl mx-auto">
          <%= render 'no_cocktails' %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<style>
  /* 全ての星に共通の基盤スタイル */
  .rating input {
    background-color: #9ca3af; /* デフォルトはグレー */
    opacity: 1 !important; /* 透明度を無効化して明るさを統一 */
  }

  /* 選択された星とその左側（DOM上では後続）を黄色にする */
  .rating input:checked,
  .rating input:checked ~ input {
    background-color: #facc15 !important; /* yellow-400 */
    opacity: 1 !important;
  }
</style>
